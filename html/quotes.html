<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <script>(function(){var t=localStorage.getItem('theme');if(t==='light'){document.documentElement.classList.remove('dark');document.documentElement.classList.add('light');}})();</script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quotes — Tides &amp; Tears</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&amp;family=Montserrat:wght@300;400;500;600&amp;display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>

  <style>
    html { scroll-behavior: smooth; }
    .grid-overlay {
      background-image: linear-gradient(to right, rgba(148, 163, 184, 0.12) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(148, 163, 184, 0.08) 1px, transparent 1px);
      background-size: 20% 100vh, 100vw 100px;
      pointer-events: none;
    }
    .texture-bg {
      background-image: radial-gradient(circle at top, #0b1220 0, #020617 55%, #000 100%);
      background-size: cover;
      background-position: center;
    }
    .vertical-line { position: absolute; top: 0; bottom: 0; width: 1px; pointer-events: none; }
    .edge-line { background: linear-gradient(to bottom, transparent 0%, rgba(255,255,255,0.04) 8%, rgba(255,255,255,0.07) 50%, rgba(255,255,255,0.04) 92%, transparent 100%); }
    .center-line { background: linear-gradient(to bottom, transparent 0%, rgba(255,255,255,0.035) 10%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.035) 90%, transparent 100%); }
    .menu-dropdown { opacity: 0; visibility: hidden; transform: translateY(-6px); transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s; }
    .menu-group.menu-open .menu-dropdown { opacity: 1; visibility: visible; transform: translateY(0); }
    .theme-btn { width: 2rem; height: 2rem; display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; border: 1px solid rgba(255,255,255,0.15); background: transparent; color: inherit; cursor: pointer; transition: color 0.2s, border-color 0.2s, background 0.2s; }
    .theme-btn:hover { color: #C84B31; border-color: rgba(200,75,49,0.4); background: rgba(200,75,49,0.08); }
    html.light .theme-btn { border-color: rgba(0,0,0,0.12); color: #0f172a; }
    html.light .theme-btn:hover { color: #C84B31; }
    html.light body{ background-color: #f1f5f9 !important; color: #0f172a !important; }
    html.light .texture-bg{ background-image: none !important; background-color: #f1f5f9 !important; }
    html.light .bg-background-dark,html.light [class*="bg-background"]{ background-color: #f1f5f9 !important; background-image: none !important; }
    html.light .text-text-dark{ color: #0f172a !important; }
    html.light .text-text-dark\/60{ color: #64748b !important; }
    html.light .border-white\/10,html.light [class*="border-white"]{ border-color: rgba(0,0,0,0.08) !important; }
    html.light nav{ background: rgba(241,245,249,0.98) !important; }
    html.light main,html.light section{ background-color: transparent !important; }
    html.light .grid-overlay{ opacity: 0.15 !important; }
    html.light h1,html.light h2{ color: #0f172a !important; }
    html.light .bg-white\/5{ background-color: rgba(0,0,0,0.04) !important; }
    .section-underline { width: 4rem; height: 2px; background: linear-gradient(to right, #C84B31, transparent); margin-top: 0.75rem; }
    .quote-pill-active { background-color: rgba(200,75,49,0.15); color: #F9FAFB; border-color: rgba(200,75,49,0.5); }
  </style>

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#C84B31",
            "background-light": "#020617",
            "background-dark": "#020617",
            "text-light": "#E5E7EB",
            "text-dark": "#F9FAFB",
          },
          fontFamily: {
            display: ["'Playfair Display'", "serif"],
            sans: ["'Montserrat'", "sans-serif"],
          },
          letterSpacing: { widest: ".25em" },
        },
      },
    };

    const QUOTES = [
      { id: 1, category: 'tides', text: 'Some days I am the storm, some days I am the ship still learning how to stay afloat.' },
      { id: 2, category: 'tides', text: 'Not every wave wants to drown you. Some are just here to teach you how to breathe underwater.' },
      { id: 3, category: 'tides', text: 'I am not where I was, but I am also not yet where I\'m going. That middle is still holy.' },
      { id: 4, category: 'tears', text: 'My tears are not proof of weakness. They are proof that I did not stay silent when it hurt.' },
      { id: 5, category: 'tears', text: 'Some nights I only survive because crying is still a way of choosing to stay.' },
      { id: 6, category: 'tears', text: 'You do not have to be okay to be worth loving. You only have to be honest.' }
    ];

    document.addEventListener("DOMContentLoaded", function () {
      AOS.init({ duration: 900, easing: "ease-out-cubic", once: true, offset: 60 });

      const menuGroup = document.querySelector('.menu-group');
      const menuButton = document.getElementById('menu-button');
      const menuDropdown = document.getElementById('menu-dropdown');
      if (menuGroup && menuButton && menuDropdown) {
        function closeMenu() {
          menuGroup.classList.remove('menu-open');
          menuButton.setAttribute('aria-expanded', 'false');
        }
        menuButton.addEventListener('click', function (e) {
          e.stopPropagation();
          const isOpen = menuGroup.classList.toggle('menu-open');
          menuButton.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        });
        menuDropdown.querySelectorAll('a').forEach(function (link) {
          link.addEventListener('click', closeMenu);
        });
        document.addEventListener('click', closeMenu);
      }
      function applyTheme(isLight) {
        var html = document.documentElement;
        var sun = document.getElementById('theme-icon-sun');
        var moon = document.getElementById('theme-icon-moon');
        if (isLight) { html.classList.remove('dark'); html.classList.add('light'); if (sun) sun.classList.add('hidden'); if (moon) moon.classList.remove('hidden'); }
        else { html.classList.add('dark'); html.classList.remove('light'); if (sun) sun.classList.remove('hidden'); if (moon) moon.classList.add('hidden'); }
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
      }
      var themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        themeToggle.addEventListener('click', function () { applyTheme(document.documentElement.classList.contains('dark')); });
        applyTheme(document.documentElement.classList.contains('light'));
      }

      const listContainer = document.getElementById('quotes-grid');
      const filterButtons = document.querySelectorAll('[data-quote-filter]');
      let currentFilter = 'all';

      function renderQuotes() {
        if (!listContainer) return;
        const filtered = QUOTES.filter(function (q) {
          return currentFilter === 'all' ? true : q.category === currentFilter;
        });
        listContainer.innerHTML = filtered.map(function (q) {
          return (
            '<button type="button" class="group relative rounded-xl border border-white/10 bg-white/5 px-5 py-6 text-left hover:border-primary/60 hover:bg-primary/5 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50" data-quote-id="' + q.id + '">' +
              '<p class="font-display text-base md:text-lg text-text-dark/90 leading-relaxed italic">“' + escapeHtml(q.text) + '”</p>' +
              '<div class="mt-4 flex items-center justify-between text-xs uppercase tracking-[0.25em] text-text-dark/50">' +
                '<span>' + (q.category === 'tides' ? 'Tides' : 'Tears') + '</span>' +
                '<span class="group-hover:text-primary">Tap to share</span>' +
              '</div>' +
              '<p class="mt-3 pt-3 border-t border-white/10 text-[10px] uppercase tracking-[0.3em] text-text-dark/40 md:hidden">Tides &amp; Tears</p>' +
            '</button>'
          );
        }).join('');

        // attach click handlers
        listContainer.querySelectorAll('[data-quote-id]').forEach(function (btn) {
          btn.addEventListener('click', function () {
            const id = parseInt(btn.getAttribute('data-quote-id'), 10);
            const quote = QUOTES.find(function (q) { return q.id === id; });
            if (quote) openQuoteModal(quote);
          });
        });
      }

      filterButtons.forEach(function (btn) {
        btn.addEventListener('click', function () {
          currentFilter = btn.getAttribute('data-quote-filter');
          filterButtons.forEach(function (b) { b.classList.remove('quote-pill-active'); });
          btn.classList.add('quote-pill-active');
          renderQuotes();
        });
      });

      function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }

      // Modal handling
      const modal = document.getElementById('quote-modal');
      const modalBackdrop = document.getElementById('quote-modal-backdrop');
      const modalClose = document.getElementById('quote-modal-close');
      const modalCard = document.getElementById('quote-share-card');
      const modalText = document.getElementById('quote-share-text');
      const colorButtons = document.querySelectorAll('[data-bg-color]');
      const downloadBtn = document.getElementById('quote-download');
      const shareBtn = document.getElementById('quote-share');

      function openQuoteModal(quote) {
        if (!modal || !modalCard || !modalText) return;
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        modalText.textContent = '“' + quote.text + '”';
        // reset to default color
        modalCard.style.background = 'linear-gradient(135deg, #020617, #111827)';
      }

      function closeQuoteModal() {
        if (!modal) return;
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }

      if (modalBackdrop) modalBackdrop.addEventListener('click', closeQuoteModal);
      if (modalClose) modalClose.addEventListener('click', closeQuoteModal);
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') closeQuoteModal();
      });

      colorButtons.forEach(function (btn) {
        btn.addEventListener('click', function () {
          const color = btn.getAttribute('data-bg-color');
          if (!modalCard) return;
          if (color === 'midnight') {
            modalCard.style.background = 'linear-gradient(135deg, #020617, #111827)';
          } else if (color === 'ember') {
            modalCard.style.background = 'linear-gradient(135deg, #1f2933, #C84B31)';
          } else if (color === 'dawn') {
            modalCard.style.background = 'linear-gradient(135deg, #111827, #EC4899)';
          } else if (color === 'seafoam') {
            modalCard.style.background = 'linear-gradient(135deg, #022c22, #14b8a6)';
          }
        });
      });

      var customColorInput = document.getElementById('quote-custom-color');
      var customColorBtn = document.getElementById('quote-custom-color-btn');
      if (customColorBtn && customColorInput && modalCard) {
        customColorBtn.addEventListener('click', function () {
          customColorInput.click();
        });
        customColorInput.addEventListener('input', function () {
          var hex = customColorInput.value;
          modalCard.style.background = hex;
        });
      }

      function captureQuoteCard(callback) {
        if (typeof html2canvas === 'undefined' || !modalCard) return;
        html2canvas(modalCard, { backgroundColor: null }).then(function (canvas) {
          canvas.toBlob(function (blob) {
            if (!blob) return;
            callback(blob);
          });
        });
      }

      function triggerDownload(blob) {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'tides-and-tears-quote.png';
        a.style.position = 'fixed';
        a.style.left = '-9999px';
        a.style.top = '0';
        a.setAttribute('aria-hidden', 'true');
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }

      if (downloadBtn && modalCard) {
        downloadBtn.addEventListener('click', function (e) {
          e.preventDefault();
          captureQuoteCard(function (blob) {
            triggerDownload(blob);
          });
        });
      }

      if (shareBtn && modalCard) {
        shareBtn.addEventListener('click', function (e) {
          e.preventDefault();
          captureQuoteCard(function (blob) {
            const file = new File([blob], 'tides-and-tears-quote.png', { type: 'image/png' });
            if (navigator.canShare && navigator.share && navigator.canShare({ files: [file] })) {
              navigator.share({
                files: [file],
                title: 'Tides & Tears quote',
                text: 'Found this quote on Tides & Tears.'
              }).catch(function () {
                // silently ignore cancel
              });
            } else {
              triggerDownload(blob);
              alert('Image saved. Share it to Instagram, Facebook, or Twitter as a story or post.');
            }
          });
        });
      }

      renderQuotes();
    });
  </script>
</head>
<body class="bg-background-dark text-text-dark font-sans transition-colors duration-300 overflow-x-hidden">
  <div class="relative min-h-screen w-full texture-bg flex flex-col">
    <div class="absolute inset-0 bg-background-dark/80 z-0"></div>
    <div class="absolute inset-0 grid-overlay z-0 opacity-20 border-l border-r border-white/10 mx-4 md:mx-12"></div>

    <div class="relative z-10 flex flex-col min-h-screen">
      <nav class="sticky top-0 z-20 w-full flex justify-between items-center py-6 px-6 md:px-12 border-b border-white/10 uppercase text-xs tracking-[0.2em] bg-background-dark/95 backdrop-blur-sm">
        <a href="../index.html" class="font-bold hidden md:block opacity-80 hover:text-primary transition-colors">Tides &amp; Tears</a>

        <a href="../index.html#stories" class="flex items-center space-x-2 md:space-x-4 cursor-pointer hover:text-primary transition-colors">
          <span>All Stories</span>
          <span class="text-lg leading-none">+</span>
        </a>

        <button type="button" class="theme-btn mr-2" id="theme-toggle" aria-label="Toggle light or dark mode" title="Theme">
          <svg id="theme-icon-sun" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg id="theme-icon-moon" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>
        <div class="relative flex items-center space-x-6 menu-group" tabindex="0">
          <button type="button" class="uppercase text-xs tracking-[0.2em] hover:text-primary transition-colors focus:outline-none focus:text-primary" aria-haspopup="true" aria-expanded="false" aria-controls="menu-dropdown" id="menu-button">Menu</button>
          <div class="menu-dropdown absolute right-0 top-full pt-2 mt-1 min-w-[160px] z-30" id="menu-dropdown" role="menu" aria-orientation="vertical">
            <div class="py-1 rounded border border-white/10 bg-background-dark/98 backdrop-blur-sm shadow-lg">
              <a href="about.html" class="block w-full text-left px-4 py-2.5 hover:bg-white/5 hover:text-primary transition-colors" role="menuitem">About</a>
              <a href="support.html" class="block px-4 py-2.5 text-left hover:bg-white/5 hover:text-primary transition-colors" role="menuitem">Support</a>
              <a href="quotes.html" class="block px-4 py-2.5 text-left hover:bg-white/5 hover:text-primary transition-colors" role="menuitem">Quotes</a>
              <a href="feedback.html" class="block px-4 py-2.5 text-left hover:bg-white/5 hover:text-primary transition-colors" role="menuitem">Feedback</a>
            </div>
          </div>
        </div>
      </nav>

      <main class="flex-grow w-full max-w-6xl mx-auto px-4 md:px-12 py-12 md:py-20">
        <header class="mb-10 md:mb-14 text-center" data-aos="fade-down">
          <p class="uppercase text-xs tracking-[0.35em] text-text-dark/60">Quotes</p>
          <h1 class="font-display text-4xl md:text-6xl tracking-widest uppercase">Tides &amp; Tears</h1>
          <div class="section-underline mx-auto"></div>
          <p class="mt-4 text-text-dark/70 text-sm md:text-base max-w-xl mx-auto">
            Instagrammable lines pulled from both the tides and the tears. Tap a quote to open it, choose a background, and save it as an image.
          </p>
        </header>

        <section class="mb-10" data-aos="fade-up">
          <div class="inline-flex gap-2 rounded-full border border-white/10 bg-white/5 px-2 py-1 text-xs uppercase tracking-[0.25em]">
            <button type="button" class="px-3 py-1 rounded-full border border-transparent quote-pill-active" data-quote-filter="all">All</button>
            <button type="button" class="px-3 py-1 rounded-full border border-transparent" data-quote-filter="tides">Tides</button>
            <button type="button" class="px-3 py-1 rounded-full border border-transparent" data-quote-filter="tears">Tears</button>
          </div>
        </section>

        <section data-aos="fade-up">
          <div id="quotes-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
            <!-- Filled by JS -->
          </div>
        </section>

        <div class="mt-12 text-center">
          <a href="../index.html" class="inline-flex items-center gap-2 rounded-full border border-primary/40 bg-primary/10 px-6 py-3 text-primary hover:bg-primary hover:text-background-dark transition-colors text-sm font-semibold tracking-widest">
            ← Back to home
          </a>
        </div>
      </main>
    </div>

    <div class="vertical-line left-[20%] edge-line z-0"></div>
    <div class="vertical-line right-[20%] edge-line z-0"></div>
    <div class="vertical-line left-1/2 -translate-x-px center-line z-0"></div>
  </div>

  <!-- Quote modal -->
  <div id="quote-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center px-4 py-6 overflow-y-auto">
    <div id="quote-modal-backdrop" class="absolute inset-0 bg-black/70 backdrop-blur-sm"></div>
    <div class="relative w-full max-w-xl mx-auto my-auto flex flex-col">
      <div class="flex justify-end mb-3 shrink-0">
        <button id="quote-modal-close" class="rounded-full border border-white/20 bg-white/10 px-3 py-1 text-xs uppercase tracking-[0.25em] text-text-light hover:bg-white/20 transition-colors">Close</button>
      </div>
      <div id="quote-share-card" class="rounded-2xl px-6 py-8 md:px-8 md:py-10 border border-white/10 shadow-2xl bg-gradient-to-br from-background-dark to-slate-900 text-text-light text-center flex flex-col overflow-visible min-h-[180px]">
        <p id="quote-share-text" class="font-display text-xl md:text-3xl leading-relaxed italic flex-grow">Quote text</p>
        <p class="quote-watermark text-xs uppercase tracking-[0.3em] text-white/90 mt-4 pt-4 border-t border-white/20 shrink-0 font-medium">Tides &amp; Tears</p>
      </div>
      <div class="mt-4 flex flex-col md:flex-row items-stretch md:items-center justify-between gap-4 shrink-0">
        <div class="flex items-center justify-center gap-2 text-xs uppercase tracking-[0.25em] text-text-dark/60 flex-nowrap pb-1 min-w-0">
          <div class="flex items-center justify-center gap-2 flex-nowrap shrink-0">
            <button type="button" class="h-8 w-8 shrink-0 rounded-full border border-white/20 bg-gradient-to-br from-slate-950 to-slate-800" data-bg-color="midnight" aria-label="Midnight background"></button>
            <button type="button" class="h-8 w-8 shrink-0 rounded-full border border-white/20 bg-gradient-to-br from-slate-900 to-[#C84B31]" data-bg-color="ember" aria-label="Ember background"></button>
            <button type="button" class="h-8 w-8 shrink-0 rounded-full border border-white/20 bg-gradient-to-br from-slate-900 to-pink-500" data-bg-color="dawn" aria-label="Dawn background"></button>
            <button type="button" class="h-8 w-8 shrink-0 rounded-full border border-white/20 bg-gradient-to-br from-emerald-900 to-teal-400" data-bg-color="seafoam" aria-label="Seafoam background"></button>
            <input type="color" id="quote-custom-color" class="sr-only w-0 h-0 opacity-0 absolute pointer-events-none" value="#1e293b" tabindex="-1" aria-hidden="true" />
            <button type="button" id="quote-custom-color-btn" class="h-8 w-8 shrink-0 rounded-full border-2 border-dashed border-white/50 flex items-center justify-center text-white/90 bg-white/5 hover:border-primary/60 hover:text-primary transition-colors" aria-label="Choose custom background color">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
            </button>
            <span class="shrink-0 text-[10px] uppercase tracking-wider text-text-dark/60 sm:hidden">Custom</span>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto">
          <button type="button" id="quote-download" class="flex-1 inline-flex items-center justify-center gap-2 rounded-full border border-primary/40 bg-primary/10 px-6 py-2.5 text-primary hover:bg-primary hover:text-background-dark transition-colors text-xs font-semibold tracking-[0.3em] uppercase">
            Save image
          </button>
          <button type="button" id="quote-share" class="flex-1 inline-flex items-center justify-center gap-2 rounded-full border border-white/20 bg-white/5 px-6 py-2.5 text-text-light hover:bg-white/10 transition-colors text-xs font-semibold tracking-[0.3em] uppercase">
            Share
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

